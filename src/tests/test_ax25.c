#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "kiss.h"
#include "ax25.h"

uint8_t packet[] = {
    0xC0, 0x00, 0x82, 0xA0, 0x8C, 0x92, 0x92, 0x60, 0xE0, 0x96, 0x68, 0x88, 0x84, 0xB4, 0x40, 0x72, 
    0xAE, 0x92, 0x88, 0x8A, 0x62, 0x40, 0x62, 0xAE, 0x92, 0x88, 0x8A, 0x64, 0x40, 0x63, 0x03, 0xF0, 
    0x40, 0x32, 0x30, 0x30, 0x35, 0x30, 0x38, 0x68, 0x33, 0x36, 0x30, 0x34, 0x2E, 0x32, 0x31, 0x4E, 
    0x5C, 0x30, 0x37, 0x38, 0x33, 0x34, 0x2E, 0x36, 0x35, 0x57, 0x6B, 0x30, 0x30, 0x32, 0x2F, 0x30, 
    0x30, 0x30, 0x2F, 0x41, 0x3D, 0x30, 0x30, 0x30, 0x34, 0x31, 0x34, 0x6D, 0x73, 0x67, 0x20, 0x63, 
    0x61, 0x70, 0x61, 0x62, 0x6C, 0x65, 0x2E, 0x20, 0x6C, 0x69, 0x73, 0x74, 0x65, 0x6E, 0x69, 0x6E, 
    0x67, 0x20, 0x34, 0x34, 0x34, 0x2E, 0x35, 0x32, 0x35, 0x20, 0x38, 0x32, 0x2E, 0x35, 0x21, 0x77, 
    0x76, 0x50, 0x21, 0xC0
};
uint16_t packet_len = 116;




int main (void) {
    KissState kiss;
    kiss_init(&kiss, 0);
    for (uint16_t i=0; i<packet_len; i++) {
        kiss_feed(&kiss, packet[i], 0);
    }
    KissFrame frame;
    kiss_read(&kiss, &frame);

    ax25_parse(frame.buffer, frame.len);
}
